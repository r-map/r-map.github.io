

<!DOCTYPE html>
<html class="writer-html5" lang="it" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Stima WiFi V3 &mdash; http://rmap.cc</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/translations.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Indice" href="../../genindex.html" />
    <link rel="search" title="Cerca" href="../../search.html" />
    <link rel="next" title="Testa di prelievo per sensori Air Quality" href="../testa_prelievo/testa_prelievo.html" />
    <link rel="prev" title="Stima WiFi V2" href="../stimawifi_v2/stima_wifi_howto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> RMAP e Stima
          

          
            
            <img src="../../_static/logo_stima.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../rmap_rfc/rfc.html">RFC rmap versione 3.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../obsolete/index.html">Stima obsolete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stima_v3/stima_v3.html">Stima V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stima_v4/stima_v4.html">Stima V4</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Stima WiFi</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../stimawifi_v2/stima_wifi_howto.html">Stima WiFi V2</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Stima WiFi V3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduzione">Introduzione</a></li>
<li class="toctree-l3"><a class="reference internal" href="#messa-in-opera-della-stazione">Messa in opera della stazione</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assemblaggio-scheda-elettronica">Assemblaggio scheda elettronica</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#strumentazione-necessaria">Strumentazione necessaria</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dotazione-software">Dotazione Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#caricamento-firmware">Caricamento firmware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Strumentazione necessaria</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Dotazione Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#collegamento-dei-sensori">Collegamento dei sensori</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Strumentazione necessaria</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Dotazione Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#censimento-stazione">Censimento stazione</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Strumentazione necessaria</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Dotazione Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#collaudo-stazione">Collaudo Stazione</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reset-della-configurazione">Reset della configurazione</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Strumentazione necessaria</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Dotazione Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#preparazione-del-guscio">Preparazione del guscio</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">Strumentazione necessaria</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Dotazione Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installazione-in-loco">Installazione in loco</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installazione-schermo-solare-e-sensore-temperatura">Installazione schermo solare e sensore temperatura</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ancora-da-scrivere">Ancora da scrivere</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#appendice-a">Appendice A</a></li>
<li class="toctree-l3"><a class="reference internal" href="#appendice-b">Appendice B</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pin">Pin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accesso-wifi">Accesso WiFi</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../testa_prelievo/testa_prelievo.html">Testa di prelievo per sensori Air Quality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_rmap/server_rmap.html">Server RMAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videotutorial/videotutorial.html">Videotutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dispense/index.html">Dispense</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RMAP e Stima</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Stima WiFi</a> &raquo;</li>
        
      <li>Stima WiFi V3</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/stima_wifi/stimawifi_v3/stima_wifi_howto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="stima-wifi-v3">
<span id="stimawifi-v3-reference"></span><h1>Stima WiFi V3<a class="headerlink" href="#stima-wifi-v3" title="Link a questa intestazione">Â¶</a></h1>
<ul class="simple">
<li><p>Citizen Science // Progetto RMAP // La Stazione STiMA</p>
<ul>
<li><p>Versione pdf <a class="reference download internal" download="" href="../../_downloads/0a91a5832588f3f0db18c9110f0996fd/stimawifi_intro.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a></p></li>
<li><p>Versione open documet <a class="reference download internal" download="" href="../../_downloads/a7338dc6bfc282769c6a0528f7f3a3f3/stimawifi_intro.odp"><code class="xref download docutils literal notranslate"><span class="pre">odp</span></code></a></p></li>
</ul>
</li>
<li><p>Stazione Stima // Hardware // Sensori</p>
<ul>
<li><p>Versione pdf <a class="reference download internal" download="" href="../../_downloads/8b2b47edfff1b1aea8f759164e386fa1/stimawifi_hardware.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a></p></li>
<li><p>Versione open documet <a class="reference download internal" download="" href="../../_downloads/af02f8c370ecdda96f59df9ac5db2694/stimawifi_hardware.odp"><code class="xref download docutils literal notranslate"><span class="pre">odp</span></code></a></p></li>
</ul>
</li>
<li><p>Configurazione // Firmware + Software // Python + Json // NodeRed</p>
<ul>
<li><p>Versione pdf <a class="reference download internal" download="" href="../../_downloads/b05a610f8260bc20b6f53fa8bd322285/stimawifi_programming.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a></p></li>
<li><p>Versione open documet <a class="reference download internal" download="" href="../../_downloads/4497a94b2aa4f687713d1d7bab6d1fef/stimawifi_programming.odp"><code class="xref download docutils literal notranslate"><span class="pre">odp</span></code></a></p></li>
</ul>
</li>
</ul>
<div class="section" id="introduzione">
<h2>Introduzione<a class="headerlink" href="#introduzione" title="Link a questa intestazione">Â¶</a></h2>
<p>Stima Wi-Fi Ã¨ una stazione di monitoraggio ambientale, uno strumento
che misura in modo continuativo, a intervalli regolari, alcuni
parametri chimici e fisici che caratterizzano lâinquinamento e le
proprietÃ  dellâambiente in cui viviamo.</p>
<p>Non Ã¨ una stazione di rilevamento meteorologico che segue i rigorosi
standard dellâorganizzazione meteorologica mondiale. I criteri per la
sua installazione sono diversi e meno stringenti da quelli da seguire
per la messa in opera e lâuso di queste ultime ma bisogna comunque
prestare una certa attenzione nel suo assemblaggio. Non si tratta
solamente di un problema di nomenclatura, perchÃ© i parametri
analizzati, lo scopo ed i criteri di messa in opera sono molto
differenti.  Il kit di autocostruzione Ã¨ progettato per poter essere
assemblato senza richiedere particolari capacitÃ  o competenze, giusto
un poâ di attenzione e manualitÃ .</p>
<img alt="../../_images/stimawifi.png" src="../../_images/stimawifi.png" />
</div>
<div class="section" id="messa-in-opera-della-stazione">
<h2>Messa in opera della stazione<a class="headerlink" href="#messa-in-opera-della-stazione" title="Link a questa intestazione">Â¶</a></h2>
<p>La messa in opera della stazione puÃ² essere affrontata in piÃ¹ fasi,
dopo aver assemblato la scheda elettronica ed averla posizionata nel
proprio guscio bisognerÃ  configurare la stazione, registrarla presso
il sito che raccoglierÃ  i dati per una prima elaborazione ed
installare la stazione in una posizione individuata in precedenza.</p>
<p>In queste pagine tratteremo sommariamente queste operazioni
preoccupandoci di dare delle direttive di massima su cosa fare e su
materiali e strumenti necessari alla corretta esecuzione delle
procedure necessarie alla messa in opera.</p>
</div>
<div class="section" id="assemblaggio-scheda-elettronica">
<h2>Assemblaggio scheda elettronica<a class="headerlink" href="#assemblaggio-scheda-elettronica" title="Link a questa intestazione">Â¶</a></h2>
<p>La prima fase della messa in opera presuppone lâassemblaggio del
modulo di sistema, la parte della stazione che si occupa di consultare
periodicamente i sensori installati e di inviare i campionamenti al
server centrale.</p>
<p>A seconda del kit utilizzato, potrebbe essere necessario utilizzare un
saldatore a stagno per installare i connettori a pettine necessari a
collegare tra loro i vari componenti ed assemblare i cavi di
connessione (il progetto prevede che connettori e cavi siano
preassemblati ma nulla vieta, per chi avesse tra gli obiettivi di
migliorare la confidenza con la saldatura di componenti elettronici di
utilizzare il kit senza il servizio di saldatura).</p>
<p>I diversi moduli dovranno essere collegati tra di loro rispettando la
polaritÃ .  Prima di procedere alla connessione dei sensori, bisognerÃ 
controllare che il sistema funzioni attivandolo tramite lâalimentatore
in dotazione oppure collegandolo via usb ad un computer.</p>
<p>Lâapparizione sul piccolo schermo oled in dotazione della scritta
Starting Up! seguito dal numero di versione del firmware e, nella
schermata successiva dellâESSID di configurazione della scheda,
STIMA-Config, e della password indicano che lâassemblaggio Ã¨ stato
completato con successo.</p>
<p>Una volta completata con successo il primo avvio, visto che la scheda
puÃ² essere alimentata in due modi diversi, tramite connettore micro
usb e tramite alimentatore 12v, bisogna togliere lâalimentazione e
provare il metodo ad alimentare la stazione verificando anche la
modalitÃ  di alimentazione che non si Ã¨ ancora utilizzata.</p>
<div class="section" id="strumentazione-necessaria">
<h3>Strumentazione necessaria<a class="headerlink" href="#strumentazione-necessaria" title="Link a questa intestazione">Â¶</a></h3>
<p>cavo micro usb
computer/Alimentatore per smartphone
saldatore a stagno*</p>
</div>
<div class="section" id="dotazione-software">
<h3>Dotazione Software<a class="headerlink" href="#dotazione-software" title="Link a questa intestazione">Â¶</a></h3>
<p>Nessuna</p>
</div>
</div>
<div class="section" id="caricamento-firmware">
<h2>Caricamento firmware<a class="headerlink" href="#caricamento-firmware" title="Link a questa intestazione">Â¶</a></h2>
<p>Questa fase della messa in opera Ã¨ facoltativa. La stazione arriva giÃ 
con un firmware installato pronta per la configurazione iniziale ma,
in caso si voglia modificare lâutilizzo della stazione,
personalizzarne le funzionalitÃ  o cogliere lâoccasione di
impratichirsi con questa operazione fondamentale nel ciclo di vita del
software per microcontrollori,</p>
<p>La stazione Stima Ã¨ basata sul microcontrollore Esp8266 prodotto da
ExpressIf. Si tratta di una soluzione economica e affidabile che da
qualche anno sta aumentando esponenzialmente la propria popolaritÃ .
Il produttore mette a disposizione strumenti gratuiti e liberi per lo
sviluppo, e sono diffuse librerie ed ambienti di progettazione per i
maggiori linguaggi di programmazione.</p>
<p>Fatta salva la facoltÃ  di usare la soluzione software con cui si ha
piÃ¹ confidenza, abbiamo selezionato, per la ridotta invasivitÃ , la
licenza di distribuzione e la disponibilitÃ  su tutti i maggiori
sistemi operativi, dellâambiente di sviluppo integrato Platformio
disponibile allâUrl <a class="reference external" href="https://www.platformio.org">https://www.platformio.org</a> che Ã¨ a sua volta
basato su ambiente di sviluppo Python.</p>
<p>Questa scelta, val la pena notarlo, non influisce in alcun modo sulle
dotazioni software adottabili successivamente per lo sviluppo di
programmi che interagiscano con la stazione di monitoraggio dopo la
sua installazione.</p>
<p>NOTA: Non tutti i cavi usb sono uguali, in special modo quelli forniti
con gli smartphone. Alcuni sono adatti solo allâalimentazione ed alla
ricarica dei dispositivi e non permettono lo scambio di dati. Se il
computer non sembra riconoscere la stazione provare a sostituire il
cavo di connessione. Se anche questa prova non sortisce effetti, ma la
stazione si accende regolarmente, Ã¨ probabile che il computer in uso
non riconosca lâinterfaccia seriale usb usata dalla stazione. In
questo caso bisognerÃ  caricare lâapposito driver prima di poter
procedere.</p>
<div class="section" id="id1">
<h3>Strumentazione necessaria<a class="headerlink" href="#id1" title="Link a questa intestazione">Â¶</a></h3>
<p>cavo micro usb
computer</p>
</div>
<div class="section" id="id2">
<h3>Dotazione Software<a class="headerlink" href="#id2" title="Link a questa intestazione">Â¶</a></h3>
<p>Ambiente di sviluppo Python
Platformio (Piattaforma per lo sviluppo embedded)</p>
</div>
</div>
<div class="section" id="collegamento-dei-sensori">
<h2>Collegamento dei sensori<a class="headerlink" href="#collegamento-dei-sensori" title="Link a questa intestazione">Â¶</a></h2>
<video controls="True" preload="auto" width="100%"><source src="../../_images/stimawifi_v3_board_e_pila.mp4" type="video/mp4"></video><p>Prima di procedere con questa fase, disalimentare la stazione di
monitoraggio.</p>
<p>Una volta assemblata e configurata la scheda madre della stazione, Ã¨
necessario collegare i sensori alla scheda e verificarne il
funzionamento.</p>
<p>Per farlo bisogna assemblare i cavi di collegamento secondo gli schemi
forniti dal produttore dei sensori facendo in modo che corrispondono
alla piedinatura dei connettori presenti sulla stazione Stima.</p>
<img alt="../../_images/board.jpg" src="../../_images/board.jpg" />
<p>Dopo aver messo a punto la cavetteria bisogna collegare i sensori
ognuno secondo lo standard facendo attenzione alla polaritÃ  ed al
voltaggio (il sensore di polveri sottili ha bisogno di essere
alimentato a 5v mentre gli altri sensori a 3,3v)</p>
<p>La prima installazione ed il collaudo dei sensori Ã¨ una fase critica,
errori possono rendere un sensore, la scheda o entrambi
inutilizzabili. Prima di alimentare ancora una volta la stazione, Ã¨
buona norma controllare la connessione con un multimetro che disponga
della modalitÃ  test di continuitÃ .  Dopo le opportune verifiche
bisogna collegare lâalimentazione esterna, usando lâalimentatore
esterno in dotazione, e verificare che la stazione si avvii
regolarmente.</p>
<p>Dovrebbe comparire sullo schermo un messaggio che invita a collegarsi
alla rete wireless attivata per le operazioni di configurazione
iniziale. Prima di procedere, perÃ², Ã¨ necessario censire la stazione
presso il server centrale.</p>
<p>NOTA: Anche se operano in condizioni ideali, i sensori di rilevamento
hanno, al netto di malfunzionamenti, una vita attesa non
illimitata. Si stima che passino circa due anni prima che i sensori,
in special modo quello per il particolato, comincino a perdere di
precisione.</p>
<div class="section" id="id3">
<h3>Strumentazione necessaria<a class="headerlink" href="#id3" title="Link a questa intestazione">Â¶</a></h3>
<p>Multimetro
Computer, tablet o smartphone con connettivitÃ  Wi-Fi</p>
</div>
<div class="section" id="id4">
<h3>Dotazione Software<a class="headerlink" href="#id4" title="Link a questa intestazione">Â¶</a></h3>
<p>Un qualunque browser web
Accesso alla rete Wi-Fi</p>
</div>
</div>
<div class="section" id="censimento-stazione">
<h2>Censimento stazione<a class="headerlink" href="#censimento-stazione" title="Link a questa intestazione">Â¶</a></h2>
<p>Prima di poter operare, a meno che non sia stata dotata di un firmware
specifico, la stazione deve essere censita presso un server di
raccolta dati.</p>
<p>Esistono due punti di raccolta dati, test.rmap.cc ed rmap.cc. Il primo
viene utilizzato per le procedure di collaudo, per controllare il
funzionamento di prototipi di nuove stazioni e per mettere a punto
lâadozione di nuovi sensori; il secondo viene usato per la raccolta e
lâelaborazione dei dati sul campo.</p>
<p>Durante la fase di collaudo bisognerÃ  registrare la stazione presso il
sito di test, una volta completata lâinstallazione bisognerÃ  ripetere
la registrazione sul sito principare e censire nuovamente la
stazione. Non Ã¨ prevista, al momento, una procedura automatizzata per
gestire la migrazione, da effettuarsi una tantum.</p>
<p>Prima di procedere al censimento vero e proprio, il gestore della
stazione deve registrare un nuovo utente, nel caso disponga giÃ  di un
profilo.</p>
<p>Una volta effettuato lâaccesso al sito con nome utente e password,
sarÃ  possibile censire una o piÃ¹ stazioni.</p>
<p>Censire una stazione consiste nel dichiararne le caratteristiche:</p>
<ul class="simple">
<li><p>Coordinate</p></li>
<li><p>Identificativo di stazione</p></li>
<li><p>Altezza dal livello del suolo</p></li>
<li><p>Classificazione del sito dal punto di vista qualitÃ  dellâaria</p></li>
<li><p>Alcune fotografie (5): una della stazione e 4 con le spalle alla
stazione verso i 4 punti cardinali</p></li>
</ul>
<p>Lâidentificativo di stazione non Ã¨ altro che il nome che dovrÃ  essere
usato in fase di configurazione iniziale.</p>
<div class="section" id="id5">
<h3>Strumentazione necessaria<a class="headerlink" href="#id5" title="Link a questa intestazione">Â¶</a></h3>
<p>Computer, tablet o smartphone</p>
</div>
<div class="section" id="id6">
<h3>Dotazione Software<a class="headerlink" href="#id6" title="Link a questa intestazione">Â¶</a></h3>
<p>Un qualunque browser web</p>
</div>
</div>
<div class="section" id="collaudo-stazione">
<h2>Collaudo Stazione<a class="headerlink" href="#collaudo-stazione" title="Link a questa intestazione">Â¶</a></h2>
<p>Dopo aver censito la stazione Ã¨ possibile configurarla. A sensori
collegati, si puÃ² accendere la stazione di monitoraggio.</p>
<p>Dovrebbe comparire sullo schermo un messaggio che invita a collegarsi
alla rete wireless attivata per le operazioni di configurazione
iniziale:</p>
<p>ssid: STIMA-config password: bellastima</p>
<p>Lâaccess point Ã¨ dotato di Capture Portal ma, se lâautomatismo non
dovesse funzionare, Ã¨ sempre possibile visitare con un browser lâurl
<a class="reference external" href="http://192.168.4.1">http://192.168.4.1</a> per iniziare la procedura di configurazione.</p>
<p>Una volta raggiunta la pagina di configurazione, bisognerÃ  inserire i
dati necessari alla connessione al sito rmap, lâurl dellâistanza
prescelta e le credenziali per lâaccesso alla rete Wi-Fi attraverso la
quale la stazione avrÃ  accesso ad internet.</p>
<p>Se tutto andrÃ  per il meglio e la stazione configurata correttamente,
sullo schermo cominceranno a scorrere le misure dei diversi sensori;
misure che saranno visibili, dopo un lasso di tempo, anche sul sito
preposto alla raccolta dei campionamenti.</p>
<p>NOTA: Non Ã¨ previsto lâuso di proxy con autenticazione per accedere ad
internet. In caso lâistituto preveda questa modalitÃ  di navigazione
sarÃ  necessario derogare in base al mac address della stazione o
creando una sottorete Wi-Fi dedicata.</p>
<div class="section" id="reset-della-configurazione">
<h3>Reset della configurazione<a class="headerlink" href="#reset-della-configurazione" title="Link a questa intestazione">Â¶</a></h3>
<p>Quando necessario, ad esempio per un cambio di configurazione
dell'access point wifi, Ã¨ possibile procedere al reset delle
configurazioni effettuando un reset con l'apposito ponticello mentre il ponticello di riconfigurazione Ã¨ cortocirduitato.
Questo video mostra una modalitÃ  per procedere alla riconfigurazione.</p>
<video controls="True" preload="auto" width="100%"><source src="../../_images/stimawifi_v3_reset.mp4" type="video/mp4"></video></div>
<div class="section" id="id7">
<h3>Strumentazione necessaria<a class="headerlink" href="#id7" title="Link a questa intestazione">Â¶</a></h3>
<p>Computer, tablet o smartphone con connettivitÃ  Wi-Fi</p>
</div>
<div class="section" id="id8">
<h3>Dotazione Software<a class="headerlink" href="#id8" title="Link a questa intestazione">Â¶</a></h3>
<p>Un qualunque browser web
Accesso alla rete Wi-Fi</p>
</div>
</div>
<div class="section" id="preparazione-del-guscio">
<h2>Preparazione del guscio<a class="headerlink" href="#preparazione-del-guscio" title="Link a questa intestazione">Â¶</a></h2>
<p>Una volta completata l'assemblaggio, la configurazione ed il collaudo
della parte elettronica della stazione, bisognerÃ  procedere ad
installarla, insieme ad alcuni sensori, allâinterno del suo guscio
protettivo. Il sensore di temperatura, per non essere influenzato
nelle sue misurazioni dal funzionamento della stazione, viene
installato in un involucro separato denominato schermo solare passivo.</p>
<p>Con delle forbici o un taglierino, bisognerÃ  tagliare da un foglio di
schiuma per imballaggi, che puÃ² essere riciclato, dei riquadri che
permettano separare lâinterno della scatola di derivazione usata come
guscio della stazione, in tre compartimenti, uno per lâelettronica,
uno per lâingresso dellâaria da analizzare e un altro alloggiamento
che permetterÃ  a sensore di polveri sottili, che andrÃ  installato a
cavallo delle due sezioni, di emettere lâaria analizzata senza
influenzare il flusso in ingresso.</p>
<p>Il foglio di schiuma andrÃ  fissato alla scatola di derivazione con
nastro biadesivo o colla a caldo, a seconda se la parete debba essere
rimovibile, insieme ai sensori. Utilizzeremo un cacciavite per
praticare dei piccoli tagli nel foglio di schiuma per far passare i
cavi di collegamento dei sensori.  Per poter controllare lo schermo
della stazione dallâesterno, andrÃ  rimosso un passacavi
laterale. Lâapertura andrÃ  chiusa con un piccolo, 4x4cm, riquadro in
plexiglas fissato con la colla a caldo allâinterno della scatola di
derivazione.</p>
<p>Altri due passacavi laterali dovranno essere intagliati per permettere
lâingresso di cavo di alimentazione e cavo dati del sensore di
temperatura.</p>
<p>Infine andranno rimossi i passacavi posti sul lato inferiore per permettere il ricircolo dâaria.</p>
<div class="section" id="id9">
<h3>Strumentazione necessaria<a class="headerlink" href="#id9" title="Link a questa intestazione">Â¶</a></h3>
<p>Forbici o taglierino
Colla a caldo
Nastro biadesivo
Un foglio di Foam a celle chiuse (schiuma per imballaggi)
Multimetro
Cacciavite
Plexiglas</p>
</div>
<div class="section" id="id10">
<h3>Dotazione Software<a class="headerlink" href="#id10" title="Link a questa intestazione">Â¶</a></h3>
<p>Nessuna</p>
</div>
</div>
<div class="section" id="installazione-in-loco">
<h2>Installazione in loco<a class="headerlink" href="#installazione-in-loco" title="Link a questa intestazione">Â¶</a></h2>
<p>Lâinstallazione della stazione prevede opere in muratura ed elettriche
che andrebbero eseguite da personale competente.</p>
<p>Ã possibile usare una staffa per parabola satellitare per ottenere un
economico sostegno che allontani la stazione dalla muratura
dellâedificio che la sosterrÃ  dello spazio necessario ad una corretta
analisi del particolato. Alla staffa andranno fissati sia lo schermo
solare, piÃ¹ in basso, la stazione vera e propria. La stazione vinen
alimentata a non piÃ¹ di 12v e quindi i rischi di incidenti elettrici
sono inesistenti, a patto che lâallaccio alla presa elettrica sia
protetto dalle intemperie secondi gli standard vigenti.</p>
</div>
<div class="section" id="installazione-schermo-solare-e-sensore-temperatura">
<h2>Installazione schermo solare e sensore temperatura<a class="headerlink" href="#installazione-schermo-solare-e-sensore-temperatura" title="Link a questa intestazione">Â¶</a></h2>
<img alt="../../_images/schermo.png" src="../../_images/schermo.png" />
<div class="section" id="ancora-da-scrivere">
<h3>Ancora da scrivere<a class="headerlink" href="#ancora-da-scrivere" title="Link a questa intestazione">Â¶</a></h3>
</div>
</div>
<div class="section" id="appendice-a">
<h2>Appendice A<a class="headerlink" href="#appendice-a" title="Link a questa intestazione">Â¶</a></h2>
<p>Checklist installazione Stima wifi
Per mettere in opera una stazione stima bisogna tenere da conto tre fattori che permettono di farla operare al meglio:</p>
<ul class="simple">
<li><p>Lâaccesso allâalimentazione di rete</p></li>
<li><p>Lâaccesso ad un access point wifi</p></li>
<li><p>Una corretta installazione per permettere ai diversi sensori di operare al meglio</p></li>
</ul>
<p>Essendo un apparato che opera allâesterno, bisogna assicurarsi che la
corrente elettrica raggiunga il sito di installazione seguendo tutto
gli standard del caso e che la connessione possa sopportare le
intemperie. Questa attivitÃ  esula dal mero assemblaggio della stazione
ed andrebbe demandata ad un tecnico specializzato.</p>
<p>La stazione dovrÃ  essere alimentata continuamente, il consumo
elettrico Ã¨ trascurabile, qualche decina di mA, ma non Ã¨ possibile
togliere alimentazione alla stazione, ad esempio nei weekend o in
tarda serata, pena lâimpossibilitÃ  di registrare e conferire i dati
raccolti.</p>
</div>
<div class="section" id="appendice-b">
<h2>Appendice B<a class="headerlink" href="#appendice-b" title="Link a questa intestazione">Â¶</a></h2>
</div>
<div class="section" id="pin">
<h2>Pin<a class="headerlink" href="#pin" title="Link a questa intestazione">Â¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 24%" />
<col style="width: 11%" />
<col style="width: 6%" />
<col style="width: 24%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>ESP-8285 Pin</p></th>
<th class="head"><p>name</p></th>
<th class="head"><p>Function</p></th>
<th class="head"><p>ESP32 C3 Pin</p></th>
<th class="head"><p>name</p></th>
<th class="head"><p>Function</p></th>
<th class="head"><p>Stima use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dx8</p></td>
<td><p>TXD</p></td>
<td><p>TX</p></td>
<td><p>TXD</p></td>
<td><p>TXD  (21)</p></td>
<td><p>TX</p></td>
<td><p>TXD</p></td>
<td><p>TXD/encA</p></td>
</tr>
<tr class="row-odd"><td><p>dx7</p></td>
<td><p>RXD</p></td>
<td><p>RX</p></td>
<td><p>RXD</p></td>
<td><p>RXD  (20)</p></td>
<td><p>RX</p></td>
<td><p>RXD</p></td>
<td><p>RXD/encB</p></td>
</tr>
<tr class="row-even"><td><p>sx7</p></td>
<td><p>A0</p></td>
<td><p>A0</p></td>
<td><p>Analog input, max 3.2V</p></td>
<td><p>GPIO3</p></td>
<td><p>D9/A3</p></td>
<td><p>IO</p></td>
<td><p>encBtn/CLEAR</p></td>
</tr>
<tr class="row-odd"><td><p>sx6</p></td>
<td><p>GPIO16</p></td>
<td><p>D0</p></td>
<td><p>IO</p></td>
<td><p>GPIO2</p></td>
<td><p>D0/A2</p></td>
<td><p>IO, Analog input, max 3.2V</p></td>
<td><p>RAIN/Analog input</p></td>
</tr>
<tr class="row-even"><td><p>dx6</p></td>
<td><p>GPIO5</p></td>
<td><p>D1</p></td>
<td><p>IO, SCL</p></td>
<td><p>GPIO10</p></td>
<td><p>D1</p></td>
<td><p>IO, SCL</p></td>
<td><p>SCL</p></td>
</tr>
<tr class="row-odd"><td><p>dx5</p></td>
<td><p>GPIO4</p></td>
<td><p>D2</p></td>
<td><p>IO, SDA</p></td>
<td><p>GPIO8</p></td>
<td><p>D2</p></td>
<td><p>IO, SDA</p></td>
<td><p>SDA</p></td>
</tr>
<tr class="row-even"><td><p>dx4</p></td>
<td><p>GPIO0</p></td>
<td><p>D3</p></td>
<td><p>IO</p></td>
<td><p>GPIO7</p></td>
<td><p>D3</p></td>
<td><p>RGB_LED</p></td>
<td><p>RGB LED (V3)</p></td>
</tr>
<tr class="row-odd"><td><p>dx3</p></td>
<td><p>GPIO2</p></td>
<td><p>D4</p></td>
<td><p>IO, 10k Pull-up, BUILTIN_LED</p></td>
<td><p>GPIO6</p></td>
<td><p>D4</p></td>
<td><p>IO</p></td>
<td><p>LED (V2) SS (V3)</p></td>
</tr>
<tr class="row-even"><td><p>sx5</p></td>
<td><p>GPIO14</p></td>
<td><p>D5</p></td>
<td><p>IO, SCK</p></td>
<td><p>GPIO1</p></td>
<td><p>D5/A1</p></td>
<td><p>IO, SCK</p></td>
<td><p>SCK</p></td>
</tr>
<tr class="row-odd"><td><p>sx4</p></td>
<td><p>GPIO12</p></td>
<td><p>D6</p></td>
<td><p>IO, MISO</p></td>
<td><p>GPIO0</p></td>
<td><p>D6/A0</p></td>
<td><p>IO, MISO</p></td>
<td><p>MISO</p></td>
</tr>
<tr class="row-even"><td><p>sx3</p></td>
<td><p>GPIO13</p></td>
<td><p>D7</p></td>
<td><p>IO, MOSI</p></td>
<td><p>GPIO4</p></td>
<td><p>D7/A4</p></td>
<td><p>IO, MOSI</p></td>
<td><p>MOSI</p></td>
</tr>
<tr class="row-odd"><td><p>sx2</p></td>
<td><p>GPIO15</p></td>
<td><p>D8</p></td>
<td><p>IO, 10k Pull-down, SS</p></td>
<td><p>GPIO5</p></td>
<td><p>D8/A5</p></td>
<td><p>IO, 10k Pull-down, SS</p></td>
<td><p>SS (V3 with RTC)</p></td>
</tr>
<tr class="row-even"><td><p>dx2</p></td>
<td><p>GND</p></td>
<td><p>G</p></td>
<td><p>Ground</p></td>
<td><p>GND</p></td>
<td><p>G</p></td>
<td><p>Ground</p></td>
<td><p>GND</p></td>
</tr>
<tr class="row-odd"><td><p>dx1</p></td>
<td><p>-</p></td>
<td><p>5V</p></td>
<td><p>5V</p></td>
<td><p>-</p></td>
<td><p>5V</p></td>
<td><p>5V</p></td>
<td><p>5v</p></td>
</tr>
<tr class="row-even"><td><p>sx1</p></td>
<td><p>3.3V</p></td>
<td><p>3V3</p></td>
<td><p>3.3V</p></td>
<td><p>3.3V</p></td>
<td><p>3V3</p></td>
<td><p>3.3V</p></td>
<td><p>3.3V</p></td>
</tr>
<tr class="row-odd"><td><p>sx8</p></td>
<td><p>RST</p></td>
<td><p>RST</p></td>
<td><p>Reset</p></td>
<td><p>RST</p></td>
<td><p>RST</p></td>
<td><p>Reset</p></td>
<td><p>RST</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>All of the IO pins run at 3.3V.</p>
</div>
</div>
<div class="section" id="accesso-wifi">
<h2>Accesso WiFi<a class="headerlink" href="#accesso-wifi" title="Link a questa intestazione">Â¶</a></h2>
<p>Le stazioni Stima, utilizzano una rete WiFi a 2.4Ghz* per collegarsi
ad internet e non possono utilizzare un proxy.  Prima di procedere con
lâinstallazione Ã¨ bene confrontarsi con il personale dellâufficio
tecnico per assicurarsi che la rete che si vuole utilizzare per la
connessione sia adatta</p>
<p>Annotare lâSSID della rete wifi a cui dovrÃ  connettersi la stazione
Stabilire se lâaccesso alla rete wifi Ã¨ protetto da password.</p>
<p>Assicurarsi che la stazione possa accedere ad internet senza passare
per un proxy Solitamente, si puÃ² derogare al filtro dei dati,
indicando allâufficio tecnico della scuola lâindirizzo MAC della
stazione La connessione WiFi deve essere assicurata 7/24</p>
<p>Una volta soddisfatti i prerequisiti, basta assicurarsi che la rete
WiFi copra con un segnale stabile il punto prescelto per
lâinstallazione.</p>
<p>[*] Anche se piÃ¹ veloce, la rete a 5Ghz non garantisce, nel nostro
caso, migliorie significative rispetto a quella a 2.4Ghz e, di contro,
Ã¨ molto piÃ¹ sensibile agli ostacoli che dovessero frapporsi tra
lâaccess point e la stazione.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../testa_prelievo/testa_prelievo.html" class="btn btn-neutral float-right" title="Testa di prelievo per sensori Air Quality" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../stimawifi_v2/stima_wifi_howto.html" class="btn btn-neutral float-left" title="Stima WiFi V2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, CC BY-SA 4.0, Parco dei Cedri nel cuore.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>