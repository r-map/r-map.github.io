

<!DOCTYPE html>
<html class="writer-html5" lang="it" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Server RMAP &mdash; RMAP e Stima 3 documentazione</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="next" title="Videotutorial" href="../videotutorial/videotutorial.html" />
    <link rel="prev" title="Stima-wifi" href="../stima_wifi/stima_wifi_howto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RMAP e Stima
          

          
            
            <img src="../_static/logo_stima.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rmap_rfc/rfc.html">RFC rmap versione 3.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stima_v3/stima_v3.html">Stima V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stima_v4/stima_v4.html">Stima V4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stima_wifi/stima_wifi_howto.html">Stima-wifi</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Server RMAP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#analisi-funzionalita-rmap">Analisi funzionalità RMAP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduzione">Introduzione</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-ingestion">Data ingestion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configurazione-delle-stazioni">Configurazione delle stazioni</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registrazione-utenti">Registrazione utenti</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualizzazione-dei-dati">Visualizzazione dei dati</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosudo">Cosudo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inserimento-manuale-dei-dati">Inserimento manuale dei dati</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rainbo">RainBO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interfaccia-web">Interfaccia web</a></li>
<li class="toctree-l3"><a class="reference internal" href="#porte-utilizzate">Porte utilizzate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installazione-server-completo-basato-su-rocky-linux-8">Installazione server completo basato su  Rocky Linux 8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installazione-sistema-operativo">Installazione sistema operativo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#postgresql">postgresql</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apache">apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stunnel">Stunnel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arkimet">Arkimet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mosquitto">Mosquitto</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rabbitmq">Rabbitmq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monit">Monit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cron">Cron</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sincronizzazione-db-da-un-server">Sincronizzazione DB da un server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#server-di-origine">Server di origine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#server-di-destinazione">Server di destinazione</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#arkiweb">Arkiweb</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installazione-server-solo-funzionalita-data-ingestion-basato-su-rocky-linux-8">Installazione server solo funzionalità DATA INGESTION basato su  Rocky Linux 8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Installazione sistema operativo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Mosquitto</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Rabbitmq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Monit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sincronizzazione-file-statici-per-autenticazione-e-autorizzazione-da-un-server-rmap-backend">Sincronizzazione file statici per autenticazione e autorizzazione da un server RMAP backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Server di origine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Server di destinazione</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installazione-server-rmap-solo-funzionalita-backend-basato-su-rocky-linux-8-a-seervizio-per-la-data-ingestion-su-un-altra-macchina">Installazione server RMAP solo funzionalità BACKEND basato su Rocky Linux 8 (a seervizio per la data ingestion su un'altra macchina)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#servizi">Servizi</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../videotutorial/videotutorial.html">Videotutorial</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RMAP e Stima</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Server RMAP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/server_rmap/server_rmap.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="server-rmap">
<h1>Server RMAP<a class="headerlink" href="#server-rmap" title="Link a questa intestazione">¶</a></h1>
<div class="section" id="analisi-funzionalita-rmap">
<h2>Analisi funzionalità RMAP<a class="headerlink" href="#analisi-funzionalita-rmap" title="Link a questa intestazione">¶</a></h2>
<div class="section" id="introduzione">
<h3>Introduzione<a class="headerlink" href="#introduzione" title="Link a questa intestazione">¶</a></h3>
<p>Le funzionalità offerte dal server RMAP
(<a class="reference external" href="https://rmap.cc/">https://rmap.cc</a>) sono implementate usando i
seguenti software e servizi (sono elencati solo quelli significativi):</p>
<ul class="simple">
<li><p>Broker AMQP (RabbitMQ) per la distribuzione di dati in tempo reale
attraverso un sistema di code, sia da stazione a server che da server
a server.</p></li>
<li><p>Broker MQTT (Mosquitto) per l’invio di dati da stazioni al server.</p></li>
<li><p>Arkimet per l’archiviazione dei dati storici</p></li>
<li><p>DB-All.e per l’archiviazione dei dati recenti</p></li>
<li><p>Una singola applicazione web (Django web framework) che gestisce</p>
<ul>
<li><p>Sistema di autenticazione</p></li>
<li><p>Visualizzazione dei dati</p></li>
<li><p>Registrazione utenti</p></li>
<li><p>Configurazione di metadati e firmware delle stazioni</p></li>
<li><p>Inserimento manuale dati e immagini georeferenziati</p></li>
<li><p>Visualizzazione personalizzata per RainBO</p></li>
</ul>
</li>
</ul>
<p><a class="reference internal" href="../_images/flussodati.png"><img alt="image0" src="../_images/flussodati.png" style="width: 16.51cm; height: 12.312cm;" /></a></p>
</div>
<div class="section" id="data-ingestion">
<h3>Data ingestion<a class="headerlink" href="#data-ingestion" title="Link a questa intestazione">¶</a></h3>
<p>Il data ingestion riguarda principalmente l’accoglimento di dati da
stazioni via MQTT e AMQP. I dati che arrivano via MQTT sono poi
inoltrati al broker AMQP, che è il nucleo della movimentazione dei dati
all’interno del sistema. I client che devono inviare dati via MQTT o
AMQP devono passare da un sistema di autenticazione e autorizzazione,
sostanzialmente per garantire che i dati siano inviati solo da utenti
autenticati e che non vadano a sovrapporsi a dati altrui. Entrambi i
broker interrogano il sistema di autenticazione<strong>,</strong> un servizio web
che implementa gli endpoint richiesti da RabbitMQ e Mosquitto. Il
servizio di autorizzazione su AMQP (cioè cosa può pubblicare un utente
autenticato) è invece delegato al demone <em>identvalidationd</em>, che prende
i dati dalla coda di ingresso dell’utente e passa alla coda di ingestion
solo i dati per cui il campo ident è uguale al nome utente. I dati che
passano quest’ultimo controllo sono poi inviati:</p>
<ul class="simple">
<li><p>Ad altre code AMQP, ad esempio per forniture esterne o per altri
processamenti. Su due di queste code sono inoltrati i dati per il
SIMC (archiviati in Arkimet in formato VM2), una per le stazioni
delle reti <em>claster</em> e <em>rmap</em> e l’altra per la rete <em>profe</em>.</p></li>
<li><p>Al database DB-All.e che contiene i dati recenti.</p></li>
</ul>
<p>Ci sono inoltre alcuni moduli per l’accoglimento di dati da sorgenti che
non usano AMQP o non usano il formato BUFR (e.g. Luftdaten).</p>
<p><a class="reference internal" href="../_images/dataingestion.png"><img alt="image1" src="../_images/dataingestion.png" style="width: 16.51cm; height: 16.016cm;" /></a></p>
</div>
<div class="section" id="configurazione-delle-stazioni">
<h3>Configurazione delle stazioni<a class="headerlink" href="#configurazione-delle-stazioni" title="Link a questa intestazione">¶</a></h3>
<p>Questa funzionalità permette l’aggiornamento della configurazione e del
firmware delle stazioni STIMA. L’aggiornamento può essere fatto via HTTP
o AMQP, previa autenticazione presso il corrispondente servizio di
autenticazione.
<a class="reference internal" href="../_images/stationmanager.png"><img alt="image2" src="../_images/stationmanager.png" style="width: 16.51cm; height: 10.372cm;" /></a></p>
</div>
<div class="section" id="registrazione-utenti">
<h3>Registrazione utenti<a class="headerlink" href="#registrazione-utenti" title="Link a questa intestazione">¶</a></h3>
<p>Questa funzionalità permette di registrare gli utenti attraverso un
classico processo di iscrizione: l’utente compila una form e riceve una
email per la conferma dell’avvenuta registrazione. Ovviamente, c’è un
dialogo con il servizio di autenticazione.
<a class="reference internal" href="../_images/registrazione_utenti.png"><img alt="image3" src="../_images/registrazione_utenti.png" style="width: 16.51cm; height: 12.136cm;" /></a></p>
</div>
<div class="section" id="visualizzazione-dei-dati">
<h3>Visualizzazione dei dati<a class="headerlink" href="#visualizzazione-dei-dati" title="Link a questa intestazione">¶</a></h3>
<p>Questo servizio permette di visualizzare i dati archiviati (DB-All.e e
Arkimet) sia su mappa che su grafico. Non c’è servizio di autenticazione
e autorizzazione perchè si presuppone che tutti i dati siano pubblici.
Questo sistema è probabilmente necessario per i dati della rete
amatoriale e quindi è necessario che il servizio corrispondente di data
ingestion sia collegato all’importatore dei dati su DB-All.e e Arkimet.
<a class="reference internal" href="../_images/borinud_showdata.png"><img alt="image4" src="../_images/borinud_showdata.png" style="width: 16.51cm; height: 7.938cm;" /></a></p>
</div>
<div class="section" id="cosudo">
<h3>Cosudo<a class="headerlink" href="#cosudo" title="Link a questa intestazione">¶</a></h3>
<p>Cosudo permette di analizzare i dati osservati per identificare
anomalie, confrontando i dati da stazione con dati radar, satellite e
previsti. Inoltre, permette all’operatore di invalidare dei dati: tali
invalidazioni sono poi inviate ai sistemi del SIMC per applicarle
sull’archivio.</p>
<p>È una applicazione che non necessita di accesso dall’esterno e deve
avere a disposizione i dati dall’archivio del SIMC.</p>
<p>Il sistema di autenticazione è necessario poiché, essendo ospitato sul
server rmap.cc, deve essere reso privato.</p>
<p>Non è ancora operativo e mancano i flussi di alimentazione dei dati.
<a class="reference internal" href="../_images/cosudo.png"><img alt="image5" src="../_images/cosudo.png" style="width: 16.51cm; height: 15.84cm;" /></a></p>
</div>
<div class="section" id="inserimento-manuale-dei-dati">
<h3>Inserimento manuale dei dati<a class="headerlink" href="#inserimento-manuale-dei-dati" title="Link a questa intestazione">¶</a></h3>
<p>Questa funzionalità permette l’inserimento manuale, da parte di
operatori, di dati e immagini via HTTP e AMQP. I dati attualmente sono
le osservazioni della neve e del tempo (quest’ultimo all’interno del
progetto RainBO). Si appoggia al sistema di autenticazione.
<a class="reference internal" href="../_images/insertdata_geoimage.png"><img alt="image6" src="../_images/insertdata_geoimage.png" style="width: 16.51cm; height: 9.102cm;" /></a></p>
</div>
<div class="section" id="rainbo">
<h3>RainBO<a class="headerlink" href="#rainbo" title="Link a questa intestazione">¶</a></h3>
<p>È l’interfaccia per un progetto, che permette la visualizzazione con
delle viste personalizzate per i seguenti servizi:</p>
<ul class="simple">
<li><p>Visualizzazione dei dati</p></li>
<li><p>Inserimento manuale dei dati</p></li>
<li><p>Registrazione utenti</p></li>
</ul>
</div>
<div class="section" id="interfaccia-web">
<h3>Interfaccia web<a class="headerlink" href="#interfaccia-web" title="Link a questa intestazione">¶</a></h3>
<p>L’accesso da browser al sistema per alcune funzionalità, quali</p>
<ul class="simple">
<li><p>Registrazione utente</p></li>
<li><p>Configurazione manuale delle stazioni</p></li>
<li><p>Visualizzazione dati</p></li>
<li><p>Inserimento manuale di dati</p></li>
</ul>
<p>Sono offerte da un sistema monolitico, in cui tutti i vari pezzi sono
interconnessi. È possibile separarli, ma è richiesto un intervento non
banale sul frontend che può essere eseguito solo a valle
dell’organizzazione dei vari pezzi di RMAP su diversi host.</p>
<p>Se una funzionalità usa varie app Django e deve quindi “assemblare”
varie interfacce insieme, allora è necessario fare un repository per la
singola funzionalità che dipende dalle app Django richieste.</p>
</div>
<div class="section" id="porte-utilizzate">
<h3>Porte utilizzate<a class="headerlink" href="#porte-utilizzate" title="Link a questa intestazione">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 22%" />
<col style="width: 8%" />
<col style="width: 29%" />
<col style="width: 9%" />
<col style="width: 15%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>porta</p></th>
<th class="head"><p>protocollo</p></th>
<th class="head"><p>server</p></th>
<th class="head"><p>servizio</p></th>
<th class="head"><p>RMAP server</p></th>
<th class="head"><p>RMAP data ingestion</p></th>
<th class="head"><p>RMAP backend</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>80</p></td>
<td><p>HTTP</p></td>
<td><p>apache</p></td>
<td><p>download conf e firmware (Stima V3)</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>442</p></td>
<td><p>HTTPS TLS con pre shared Key</p></td>
<td><p>stunnel</p></td>
<td><p>download conf e firmware (Stima v4)</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>444</p></td>
<td><p>HTTPS  (SSL/TLS)</p></td>
<td><p>apache</p></td>
<td><p>gestione backend e visualizzazione dati</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>5925</p></td>
<td><p>HTTP</p></td>
<td><p>monit</p></td>
<td><p>monitoraggio daemoni RMAP</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>1883</p></td>
<td><p>MQTT</p></td>
<td><p>mosquitto</p></td>
<td><p>pubblicazioni dati stazione (Stima V3)</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>5671</p></td>
<td><p>AMQPS  (SSL/TLS)</p></td>
<td><p>rabbit-mq</p></td>
<td><p>pubblicazione e distribuzione dati</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>5672</p></td>
<td><p>AMQP</p></td>
<td><p>rabbit-mq</p></td>
<td><p>pubblicazione e distribuzione dati</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>8883</p></td>
<td><p>MQTTS TLS con pre shared Key</p></td>
<td><p>mosquitto</p></td>
<td><p>pubblicazione stazioni (Stima V4)</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>8884</p></td>
<td><p>MQTTS (SSL/TLS) WEBSOCKET</p></td>
<td><p>mosquitto</p></td>
<td><p>monitoraggio MQTT da web</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>15672</p></td>
<td><p>HTTP</p></td>
<td><p>rabbit-mq</p></td>
<td><p>Management Plugin</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="installazione-server-completo-basato-su-rocky-linux-8">
<h2>Installazione server completo basato su  Rocky Linux 8<a class="headerlink" href="#installazione-server-completo-basato-su-rocky-linux-8" title="Link a questa intestazione">¶</a></h2>
<div class="section" id="installazione-sistema-operativo">
<h3>Installazione sistema operativo<a class="headerlink" href="#installazione-sistema-operativo" title="Link a questa intestazione">¶</a></h3>
<p>Installare Rocky Linux 8.</p>
<p>Aggiunta repository e installazione pacchetti</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">yum</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">copr</span>
<span class="n">dnf</span> <span class="n">copr</span> <span class="n">enable</span> <span class="n">simc</span><span class="o">/</span><span class="n">stable</span>
<span class="n">dnf</span> <span class="n">copr</span> <span class="n">enable</span> <span class="n">pat1</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">enabled</span> <span class="n">powertools</span>
<span class="n">dnf</span> <span class="n">copr</span> <span class="n">enable</span> <span class="n">simc</span><span class="o">/</span><span class="n">cosudo</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">rmap</span>
<span class="n">python3</span><span class="o">-</span><span class="n">django</span><span class="o">-</span><span class="n">cors</span><span class="o">-</span><span class="n">headers</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">django</span><span class="o">-</span><span class="n">dynamic</span><span class="o">-</span><span class="nb">map</span><span class="o">-</span><span class="n">borinud</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">mosquitto</span> <span class="n">mosquitto</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">plug</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">arkimet</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">stunnel</span>
<span class="n">useradd</span> <span class="n">rmap</span>
</pre></div>
</div>
<p>/etc/selinux/config:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELINUX</span><span class="o">=</span><span class="n">disabled</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/tmpfiles.d/rmap.conf">/etc/tmpfiles.d/rmap.conf</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span>
<span class="n">chmod</span> <span class="n">go</span><span class="o">+</span><span class="n">rx</span> <span class="o">/</span><span class="n">rmap</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/sysconfig/crond">/etc/sysconfig/crond</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">rmap</span><span class="p">:</span><span class="n">rmap</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">rmap</span>
</pre></div>
</div>
</div>
<div class="section" id="postgresql">
<h3>postgresql<a class="headerlink" href="#postgresql" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">module</span> <span class="n">disable</span> <span class="n">postgresql</span><span class="p">:</span><span class="mi">10</span>
<span class="n">dnf</span> <span class="n">module</span> <span class="n">enable</span> <span class="n">postgresql</span><span class="p">:</span><span class="mi">12</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">postgresql</span><span class="o">-</span><span class="n">server</span> <span class="n">postgresql</span><span class="o">-</span><span class="n">contrib</span> <span class="n">python3</span><span class="o">-</span><span class="n">psycopg2</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">postgresql</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span><span class="o">/</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/systemd/system/postgresql.service.d/rmap.conf">/etc/systemd/system/postgresql.service.d/rmap.conf</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span>
<span class="n">chown</span> <span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span>
<span class="n">postgresql</span><span class="o">-</span><span class="n">setup</span> <span class="o">--</span><span class="n">initdb</span> <span class="o">--</span><span class="n">unit</span> <span class="n">postgresql</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/rmap/pgsql/data/pg_hba.conf">/rmap/pgsql/data/pg_hba.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/rmap/pgsql/data/postgresql.conf">/rmap/pgsql/data/postgresql.conf</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">postgresql</span><span class="o">.</span><span class="n">service</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">postgresql</span><span class="o">.</span><span class="n">service</span>

<span class="n">su</span> <span class="o">-</span> <span class="n">postgres</span>
<span class="n">createuser</span> <span class="o">-</span><span class="n">P</span> <span class="o">-</span><span class="n">e</span> <span class="n">rmapadmin</span>
<span class="n">createdb</span> <span class="o">--</span><span class="n">owner</span><span class="o">=</span><span class="n">rmapadmin</span> <span class="n">rmapadmin</span>
<span class="n">exit</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/rmap/rmap-site.cfg">/etc/rmap/rmap-site.cfg</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/rmap/dashboard.conf">/etc/rmap/dashboard.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/rmap/graphTemplates.conf">/etc/rmap/graphTemplates.conf</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rmapctrl</span> <span class="o">--</span><span class="n">syncdb</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">su</span> <span class="o">-</span> <span class="n">postgres</span>
<span class="n">createuser</span> <span class="o">-</span><span class="n">P</span> <span class="o">-</span><span class="n">e</span> <span class="n">rmap</span>
<span class="n">createdb</span> <span class="o">--</span><span class="n">owner</span><span class="o">=</span><span class="n">rmap</span> <span class="n">report_fixed</span>
<span class="n">createdb</span> <span class="o">--</span><span class="n">owner</span><span class="o">=</span><span class="n">rmap</span> <span class="n">report_mobile</span>
<span class="n">createdb</span> <span class="o">--</span><span class="n">owner</span><span class="o">=</span><span class="n">rmap</span> <span class="n">sample_fixed</span>
<span class="n">createdb</span> <span class="o">--</span><span class="n">owner</span><span class="o">=</span><span class="n">rmap</span> <span class="n">sample_mobile</span>

<span class="n">exit</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbadb</span> <span class="n">wipe</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:&lt;password&gt;@localhost/report_fixed&quot;</span>
<span class="n">dbadb</span> <span class="n">wipe</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:&lt;password&gt;@localhost/report_mobile&quot;</span>
<span class="n">dbadb</span> <span class="n">wipe</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:&lt;password&gt;@localhost/sample_mobile&quot;</span>
<span class="n">dbadb</span> <span class="n">wipe</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:&lt;password&gt;@localhost/sample_fixed&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="apache">
<h3>apache<a class="headerlink" href="#apache" title="Link a questa intestazione">¶</a></h3>
<p>Collect static files from django apps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">global_static</span>
<span class="n">rmapctrl</span> <span class="o">--</span><span class="n">collectstatic</span>
<span class="n">rmdir</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">global_static</span>

<span class="n">dnf</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">mod_wsgi</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">mod_security</span> <span class="n">mod_security_crs</span>

<span class="n">useradd</span> <span class="o">-</span><span class="n">r</span> <span class="n">rmap</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">chown</span> <span class="n">rmap</span><span class="p">:</span><span class="n">rmap</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">cache</span>
<span class="n">chown</span> <span class="n">rmap</span><span class="p">:</span><span class="n">rmap</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">cache</span>
<span class="n">mkdir</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">media</span>
<span class="n">chown</span> <span class="n">rmap</span><span class="p">:</span><span class="n">rmap</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">media</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/httpd/conf.modules.d/00-mpm.conf">/etc/httpd/conf.modules.d/00-mpm.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/httpd/conf.d/rmap.conf">/etc/httpd/conf.d/rmap.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/httpd/conf.d/rmap.inc">/etc/httpd/conf.d/rmap.inc</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/httpd/modsecurity.d/crs-setup.conf">/etc/httpd/modsecurity.d/crs-setup.conf</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>chkconfig httpd on``
service httpd start``
</pre></div>
</div>
</div>
<div class="section" id="stunnel">
<h3>Stunnel<a class="headerlink" href="#stunnel" title="Link a questa intestazione">¶</a></h3>
<p>Create file with psk keys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rmapctrl</span> <span class="o">--</span><span class="n">exportmqttpsk</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">stunnel</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">psk</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/stunnel/stunnel.conf">/etc/stunnel/stunnel.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/cron.d/stunnel_presharedkey">/etc/cron.d/stunnel_presharedkey</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>chkconfig stunnel on``
service stunnel start``
</pre></div>
</div>
</div>
<div class="section" id="arkimet">
<h3>Arkimet<a class="headerlink" href="#arkimet" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">install</span> <span class="n">arkimet</span> <span class="n">arkimet</span><span class="o">-</span><span class="n">postprocessor</span><span class="o">-</span><span class="n">suite</span>
<span class="n">useradd</span>  <span class="o">-</span><span class="n">r</span> <span class="n">arkimet</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">arkimet</span>
<span class="n">chown</span> <span class="n">arkimet</span><span class="p">:</span><span class="n">arkimet</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">arkimet</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">arkimet</span><span class="o">/</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">arkimet</span><span class="p">:</span><span class="n">rmap</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">arkimet</span><span class="o">/</span>
<span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="n">g</span><span class="o">+</span><span class="n">w</span>  <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">arkimet</span><span class="o">/</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">arkimet</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">arkimet</span><span class="p">:</span><span class="n">arkimet</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">arkimet</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/sysconfig/arkimet">/etc/sysconfig/arkimet</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/arkimet/scan/bufr_generic_mobile_rmap.py">/etc/arkimet/scan/bufr_generic_mobile_rmap.py</a></p>
<p>Replicate structure in:</p>
<p><a class="reference external" href="https://github.com/r-map/rmap/tree/master/server/rmap/arkimet">/rmap/arkimet</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
<span class="n">chkconfig</span> <span class="n">arkimet</span> <span class="n">on</span>
<span class="n">service</span> <span class="n">arkimet</span> <span class="n">start</span>
</pre></div>
</div>
</div>
<div class="section" id="mosquitto">
<h3>Mosquitto<a class="headerlink" href="#mosquitto" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">mosquitto</span>
<span class="n">chown</span> <span class="n">mosquitto</span><span class="p">:</span><span class="n">mosquitto</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">mosquitto</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/mosquitto/conf.d/rmap.conf">/etc/mosquitto/conf.d/rmap.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/mosquitto/aclfile">/etc/mosquitto/aclfile</a></p>
<p>remove everythings and add in /etc/mosquitto/mosquitto.conf</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include_dir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span>
<span class="n">pid_file</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">.</span><span class="n">pid</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">touch</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">pwfile</span>
<span class="n">chkconfig</span> <span class="n">mosquitto</span> <span class="n">on</span>
<span class="n">service</span> <span class="n">mosquitto</span> <span class="n">start</span>
</pre></div>
</div>
<p>if the package use systemV create:</p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/monit.d/mosquitto">/etc/monit.d/mosquitto</a></p>
</div>
<div class="section" id="rabbitmq">
<h3>Rabbitmq<a class="headerlink" href="#rabbitmq" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">packagecloud</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">rpm</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span><span class="n">bash</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">packagecloud</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">/</span><span class="n">erlang</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">rpm</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">bash</span>

<span class="n">dnf</span> <span class="n">install</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/rabbitmq/enabled_plugins">/etc/rabbitmq/enabled_plugins</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/rabbitmq/rabbitmq-env.conf">/etc/rabbitmq/rabbitmq-env.conf</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/rabbitmq/rabbitmq.config">/etc/rabbitmq/rabbitmq.config</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">/</span><span class="n">mnesia</span><span class="o">/</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">rabbitmq</span><span class="p">:</span><span class="n">rabbitmq</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">rabbitmq</span>
<span class="n">chkconfig</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span> <span class="n">on</span>
<span class="n">service</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span> <span class="n">start</span>
</pre></div>
</div>
<p>login at management interface with user &quot;guest&quot; and password &quot;guest&quot;
on overview page use import definition to configure exchange, queue and users
with the same management interface remove &quot;guest&quot; user and login with a new real user</p>
<p>Per attivare uno showell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rabbitmqctl</span> <span class="n">set_parameter</span> <span class="n">shovel</span> <span class="n">report_mobile</span> <span class="s1">&#39;{&quot;src-protocol&quot;: &quot;amqp091&quot;, &quot;src-uri&quot;: &quot;amqp://rmap:&lt;password&gt;@rmap.cc&quot;, &quot;src-queue&quot;: &quot;report_mobile_saved&quot;, &quot;dest-protocol&quot;: &quot;amqp091&quot;, &quot;dest-uri&quot;: &quot;amqp://rmap:&lt;password&gt;@&quot;, &quot;dest-queue&quot;: &quot;report_mobile&quot;}&#39;</span>
</pre></div>
</div>
<p>problema non risolto:
se si trasferiscono dati scritti da un utente autenticandosi con un altro utente la security su user_id lo vieta.
<a class="reference external" href="https://www.rabbitmq.com/shovel-dynamic.html">https://www.rabbitmq.com/shovel-dynamic.html</a>
bisognerebbe riuscire a settare &quot;user_id&quot; tramite il parametro &quot;dest-publish-properties&quot; nel formato json sopra ma non funziona</p>
</div>
<div class="section" id="monit">
<h3>Monit<a class="headerlink" href="#monit" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="n">monit</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/monitrc">/etc/monitrc</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/monit.d/rmap">/etc/monit.d/rmap</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chkconfig</span> <span class="n">monit</span> <span class="n">on</span>
<span class="n">service</span> <span class="n">monit</span> <span class="n">start</span>
</pre></div>
</div>
</div>
<div class="section" id="cron">
<h3>Cron<a class="headerlink" href="#cron" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">dballe</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">rmap</span><span class="p">:</span><span class="n">rmap</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">dballe</span>
</pre></div>
</div>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/cron.d/arpae_aq_ckan">/etc/cron.d/arpae_aq_ckan</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/cron.d/dballe2arkimet">/etc/cron.d/dballe2arkimet</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/cron.d/luftdaten">/etc/cron.d/luftdaten</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server/etc/cron.d/makeexplorer">/etc/cron.d/makeexplorer</a></p>
</div>
<div class="section" id="sincronizzazione-db-da-un-server">
<h3>Sincronizzazione DB da un server<a class="headerlink" href="#sincronizzazione-db-da-un-server" title="Link a questa intestazione">¶</a></h3>
<div class="section" id="server-di-origine">
<h4>Server di origine<a class="headerlink" href="#server-di-origine" title="Link a questa intestazione">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rmapctrl</span> <span class="o">--</span><span class="n">dumpdata</span> <span class="o">&gt;</span> <span class="n">dumpdata</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>rimuovere le prime righe che non sono json</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbadb</span> <span class="n">export</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;mysql:///report_fixed?user=rmap&amp;password=****&quot;</span> <span class="o">&gt;</span> <span class="n">report_fixed</span><span class="o">.</span><span class="n">bufr</span>
<span class="n">dbadb</span> <span class="n">export</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;mysql:///report_mobile?user=rmap&amp;password=****&quot;</span> <span class="o">&gt;</span> <span class="n">report_mobile</span><span class="o">.</span><span class="n">bufr</span>
<span class="n">dbadb</span> <span class="n">export</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;mysql:///sample_fixed?user=rmap&amp;password=****&quot;</span> <span class="o">&gt;</span> <span class="n">sample_fixed</span><span class="o">.</span><span class="n">bufr</span>
<span class="n">dbadb</span> <span class="n">export</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;mysql:///sample_mobile?user=rmap&amp;password=****&quot;</span> <span class="o">&gt;</span> <span class="n">sample_mobile</span><span class="o">.</span><span class="n">bufr</span>
</pre></div>
</div>
</div>
<div class="section" id="server-di-destinazione">
<h4>Server di destinazione<a class="headerlink" href="#server-di-destinazione" title="Link a questa intestazione">¶</a></h4>
<p>Da interfaccia web admin rimuovere TUTTI gli utenti (compreso rmap)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rmapctrl</span> <span class="o">--</span><span class="n">loaddata</span><span class="o">=</span><span class="n">dumpdata</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbadb</span> <span class="kn">import</span> <span class="o">--</span><span class="n">wipe</span><span class="o">-</span><span class="n">first</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:***@localhost/report_fixed&quot;</span> <span class="n">report_fixed</span><span class="o">.</span><span class="n">bufr</span>
<span class="n">dbadb</span> <span class="kn">import</span> <span class="o">--</span><span class="n">wipe</span><span class="o">-</span><span class="n">first</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:***@localhost/report_mobile&quot;</span> <span class="n">report_mobile</span><span class="o">.</span><span class="n">bufr</span>
<span class="n">dbadb</span> <span class="kn">import</span> <span class="o">--</span><span class="n">wipe</span><span class="o">-</span><span class="n">first</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:***@localhost/sample_mobile&quot;</span> <span class="n">sample_mobile</span><span class="o">.</span><span class="n">bufr</span>
<span class="n">dbadb</span> <span class="kn">import</span> <span class="o">--</span><span class="n">wipe</span><span class="o">-</span><span class="n">first</span> <span class="o">--</span><span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;postgresql://rmap:***@localhost/sample_fixed&quot;</span> <span class="n">sample_fixed</span><span class="o">.</span><span class="n">bufr</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">rmap</span><span class="o">/</span>
<span class="n">rsync</span> <span class="o">-</span><span class="n">av</span> <span class="n">utente</span><span class="nd">@serverorigine</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">media</span> <span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="arkiweb">
<h3>Arkiweb<a class="headerlink" href="#arkiweb" title="Link a questa intestazione">¶</a></h3>
<p>AL MOMENTO NON DISPONIBILE !</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">install</span> <span class="n">arkiweb</span>
</pre></div>
</div>
<p>/etc/httpd/conf.d/arkiweb.conf</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ScriptAlias</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">/</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">/</span>
<span class="n">Alias</span> <span class="o">/</span><span class="n">arkiweb</span>  <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">arkiweb</span>

<span class="o">&lt;</span><span class="n">Directory</span> <span class="s2">&quot;/usr/lib64/arkiweb&quot;</span><span class="o">&gt;</span>
       <span class="n">AllowOverride</span> <span class="kc">None</span>
       <span class="n">Options</span> <span class="o">+</span><span class="n">ExecCGI</span>

       <span class="n">Order</span> <span class="n">allow</span><span class="p">,</span><span class="n">deny</span>
       <span class="n">Allow</span> <span class="kn">from</span> <span class="nn">all</span>

       <span class="c1"># ARKIWEB_CONFIG is mandatory!</span>
       <span class="n">SetEnv</span> <span class="n">ARKIWEB_CONFIG</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">arkimet</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">.</span><span class="n">config</span>


       <span class="n">Require</span> <span class="nb">all</span> <span class="n">granted</span>

       <span class="c1"># Authentication (optional)</span>
       <span class="c1">#</span>
       <span class="c1"># Basic authentication example:</span>
       <span class="c1"># SetEnv ARKIWEB_RESTRICT REMOTE_USER</span>
       <span class="c1"># AuthType Basic</span>
       <span class="c1"># AuthUserFile /etc/arkiweb.passwords</span>
       <span class="c1"># require valid-user</span>
<span class="o">&lt;/</span><span class="n">Directory</span><span class="o">&gt;</span>

<span class="n">Alias</span> <span class="o">/</span><span class="n">arkiwebjs</span><span class="o">/</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">/</span><span class="n">public</span><span class="o">/</span>
<span class="o">&lt;</span><span class="n">Directory</span> <span class="s2">&quot;/usr/share/arkiweb/public&quot;</span><span class="o">&gt;</span>
          <span class="c1">#Require all granted</span>
          <span class="n">AllowOverride</span> <span class="kc">None</span>

          <span class="n">Order</span> <span class="n">allow</span><span class="p">,</span><span class="n">deny</span>
          <span class="n">Allow</span> <span class="kn">from</span> <span class="nn">all</span>

          <span class="n">Require</span> <span class="nb">all</span> <span class="n">granted</span>

<span class="o">&lt;/</span><span class="n">Directory</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">/</span>
<span class="n">cp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">arkiweb</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>/rmap/arkimet/arkiweb.config</p>
</div>
</div>
<div class="section" id="installazione-server-solo-funzionalita-data-ingestion-basato-su-rocky-linux-8">
<h2>Installazione server solo funzionalità DATA INGESTION basato su  Rocky Linux 8<a class="headerlink" href="#installazione-server-solo-funzionalita-data-ingestion-basato-su-rocky-linux-8" title="Link a questa intestazione">¶</a></h2>
<div class="section" id="id1">
<h3>Installazione sistema operativo<a class="headerlink" href="#id1" title="Link a questa intestazione">¶</a></h3>
<p>Installare Rocky Linux 8.</p>
<p>Aggiunta repository e installazione pacchetti</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">yum</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">copr</span>
<span class="n">dnf</span> <span class="n">copr</span> <span class="n">enable</span> <span class="n">simc</span><span class="o">/</span><span class="n">stable</span>
<span class="n">dnf</span> <span class="n">copr</span> <span class="n">enable</span> <span class="n">pat1</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">enabled</span> <span class="n">powertools</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">rmap</span><span class="o">-</span><span class="n">core</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">mosquitto</span> <span class="n">mosquitto</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">plug</span>
<span class="n">useradd</span> <span class="n">rmap</span>
</pre></div>
</div>
<p>modificare il file /etc/selinux/config:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELINUX</span><span class="o">=</span><span class="n">disabled</span>
</pre></div>
</div>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/tmpfiles.d/rmap.conf">/etc/tmpfiles.d/rmap.conf</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span>
<span class="n">chmod</span> <span class="n">go</span><span class="o">+</span><span class="n">rx</span> <span class="o">/</span><span class="n">rmap</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">rmap</span><span class="p">:</span><span class="n">rmap</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">rmap</span>
</pre></div>
</div>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/rmap/rmap-site.cfg">/etc/rmap/rmap-site.cfg</a></p>
<p>cambiare la password dell'utente amministratore.</p>
</div>
<div class="section" id="id2">
<h3>Mosquitto<a class="headerlink" href="#id2" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">mosquitto</span>
<span class="n">chown</span> <span class="n">mosquitto</span><span class="p">:</span><span class="n">mosquitto</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">mosquitto</span>
</pre></div>
</div>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/mosquitto/conf.d/rmap.conf">/etc/mosquitto/conf.d/rmap.conf</a></p>
<p>cancellare tutto il contenuto del file /etc/mosquitto/mosquitto.conf e sostituirlo con le seguenti righe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include_dir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span>
<span class="n">pid_file</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">/</span><span class="n">mosquitto</span><span class="o">.</span><span class="n">pid</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">mosquitto</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">mosquitto</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>Rabbitmq<a class="headerlink" href="#id3" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">packagecloud</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">rpm</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span><span class="n">bash</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">packagecloud</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">/</span><span class="n">erlang</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">rpm</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">bash</span>

<span class="n">dnf</span> <span class="n">install</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/rabbitmq/enabled_plugins">/etc/rabbitmq/enabled_plugins</a></p>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/rabbitmq/rabbitmq-env.conf">/etc/rabbitmq/rabbitmq-env.conf</a></p>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/rabbitmq/rabbitmq.config">/etc/rabbitmq/rabbitmq.config</a></p>
<p>Installare il certificato ssl/tls per il dominio del server in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">arpaecert</span><span class="o">/</span><span class="n">arpae_it</span><span class="o">-</span><span class="n">rabbitmq</span><span class="o">.</span><span class="n">pem</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">arpaecert</span><span class="o">/</span><span class="n">arpae_it</span><span class="o">-</span><span class="n">mosquitto</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<p>e impostare gli opportuni privilegi di lettura/scrittura.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">rw</span><span class="o">-------</span> <span class="mi">1</span> <span class="n">mosquitto</span> <span class="n">mosquitto</span> <span class="mi">6849</span>  <span class="mi">1</span> <span class="n">dic</span> <span class="mf">14.23</span> <span class="n">arpae_it</span><span class="o">-</span><span class="n">mosquitto</span><span class="o">.</span><span class="n">pem</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-------</span> <span class="mi">1</span> <span class="n">rabbitmq</span>  <span class="n">rabbitmq</span>  <span class="mi">6849</span> <span class="mi">20</span> <span class="n">nov</span> <span class="mf">10.49</span> <span class="n">arpae_it</span><span class="o">-</span><span class="n">rabbitmq</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">rabbitmq</span><span class="o">/</span><span class="n">mnesia</span><span class="o">/</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">rabbitmq</span><span class="p">:</span><span class="n">rabbitmq</span> <span class="o">/</span><span class="n">rmap</span><span class="o">/</span><span class="n">rabbitmq</span>
<span class="n">systemctl</span> <span class="n">enable</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
<p>effettuare il login all'interfaccia di management web: &lt;<a class="reference external" href="http://server-fqdn:15672/">http://server-fqdn:15672/</a>&gt;
con user &quot;guest&quot; e password &quot;guest&quot;, quindi utilizzare la funzione &quot;import definition&quot; per caricare exchange, queue e users importando il seguente file:</p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/rabbitmq/rabbit_server_data_ingestion.json">rabbit_server_data_ingestion.json</a></p>
<p>dalla stessa interfaccia di management web impostare le password per tutti gli utenti, rimuovere l'utente &quot;guest&quot; e fare login con uno dei nuovi utenti definiti.</p>
</div>
<div class="section" id="id4">
<h3>Monit<a class="headerlink" href="#id4" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="n">monit</span>
</pre></div>
</div>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/monitrc">/etc/monitrc</a></p>
<p>scaricare il file <a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-data-ingestion/etc/monit.d/rmap">/etc/monit.d/rmap</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">0700</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">monitrc</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">monit</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">chown</span> <span class="n">root</span><span class="p">:</span><span class="n">root</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">monitrc</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">monit</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">rmap</span>
<span class="n">systemctl</span> <span class="n">enable</span> <span class="n">monit</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">monit</span>
</pre></div>
</div>
</div>
<div class="section" id="sincronizzazione-file-statici-per-autenticazione-e-autorizzazione-da-un-server-rmap-backend">
<h3>Sincronizzazione file statici per autenticazione e autorizzazione da un server RMAP backend<a class="headerlink" href="#sincronizzazione-file-statici-per-autenticazione-e-autorizzazione-da-un-server-rmap-backend" title="Link a questa intestazione">¶</a></h3>
<div class="section" id="id5">
<h4>Server di origine<a class="headerlink" href="#id5" title="Link a questa intestazione">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rmapctrl</span> <span class="o">--</span><span class="n">exportsha</span> <span class="o">&gt;</span> <span class="n">file</span><span class="o">.</span><span class="n">pwd</span>
<span class="n">rmapctrl</span> <span class="o">--</span><span class="n">exportmqttsha</span> <span class="o">&gt;&gt;</span> <span class="n">file</span><span class="o">.</span><span class="n">pwd</span>
<span class="n">rmapctrl</span> <span class="o">--</span><span class="n">exportmqttacl</span> <span class="o">&gt;</span> <span class="n">aclfile</span>
<span class="n">rmapctrl</span> <span class="o">--</span><span class="n">exportmqttpsk</span> <span class="o">&gt;</span> <span class="n">file</span><span class="o">.</span><span class="n">psk</span>
</pre></div>
</div>
<p>eventualmente rimuovere le prime righe di messaggistica del logging</p>
</div>
<div class="section" id="id6">
<h4>Server di destinazione<a class="headerlink" href="#id6" title="Link a questa intestazione">¶</a></h4>
<p>Trasferire i file in /etc/mosquitto/ sul nostro server per la data ingestion.
Imparire il comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">systemctl</span> <span class="n">reload</span> <span class="n">mosquitto</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="installazione-server-rmap-solo-funzionalita-backend-basato-su-rocky-linux-8-a-seervizio-per-la-data-ingestion-su-un-altra-macchina">
<h2>Installazione server RMAP solo funzionalità BACKEND basato su Rocky Linux 8 (a seervizio per la data ingestion su un'altra macchina)<a class="headerlink" href="#installazione-server-rmap-solo-funzionalita-backend-basato-su-rocky-linux-8-a-seervizio-per-la-data-ingestion-su-un-altra-macchina" title="Link a questa intestazione">¶</a></h2>
<p>Questi file sono specializzati per un server di solo backend:</p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-backend/etc/httpd/conf.d/rmap.inc">/etc/httpd/conf.d/rmap.inc</a></p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-backend/etc/httpd/modsecurity.d/crs-setup.conf">/etc/httpd/modsecurity.d/crs-setup.conf</a></p>
<p>In questi due file sostituire la stringa &lt;insert IP of data-ingestion machine&gt; con quanto indicato.</p>
<p><a class="reference external" href="https://raw.githubusercontent.com/r-map/rmap/master/server-backend/etc/monit.d/rmap">/etc/monit.d/rmap</a></p>
<div class="section" id="servizi">
<h3>Servizi<a class="headerlink" href="#servizi" title="Link a questa intestazione">¶</a></h3>
<p>Disabilitare mosquitto.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../videotutorial/videotutorial.html" class="btn btn-neutral float-right" title="Videotutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../stima_wifi/stima_wifi_howto.html" class="btn btn-neutral float-left" title="Stima-wifi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, CC BY-SA 4.0, Arpae https://www.arpae.it.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>